!function(a){a.fn.wpUpload=function(){var e=null,t=null,l=null,d=null,n=null,r=null,i=null,s=null,o=function(){t=a("<input/>").attr("type","text").attr("class","input").addClass("input wp-upload__input"),null!==n&&t.attr("name",n),null!==r&&t.attr("id",r),null!==s&&t.attr("placeholder",s),null!==i&&(t.val(i),i.toString().toLowerCase().match(/\.(jpg|jpeg|png|gif|bmp)/g)&&(d=a("<img/>").attr("src",i).addClass("wp-upload__image"))),l=a("<button>Załaduj</button>").addClass("btn wp-upload__btn"),e.append(t).append(l),null!==i&&e.append(d)},p=function(){t.on("change, keyup",c),l.on("click",h)},c=function(t){a(this).val().toLowerCase().match(/\.(jpg|jpeg|png|gif|bmp)/g)&&(i=a(this).val(),null===d&&(d=a("<img/>").addClass("wp-upload__image"),e.append(d)),d.attr("src",i))},h=function(l){l.preventDefault();var n=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(l){var r=n.state().get("selection").first();i=r.toJSON().url,t.val(i),i.toString().toLowerCase().match(/\.(jpg|jpeg|png|gif|bmp)/g)&&(null===d&&(d=a("<img/>").addClass("wp-upload__image"),e.append(d)),d.attr("src",i))})};this.length>0&&(this.length>1?this.each(function(){a(this).wpUpload()}):(void 0===(n=(e=this).data("name"))&&(n=null),void 0===(r=e.data("id"))&&(r=null),void 0===(i=e.data("value"))&&(i=null),void 0===(s=e.data("placeholder"))&&(s=null),o(),p()))}}(jQuery),function(a){a.fn.dynamicTabs=function(){var e=null,t=null,l=null,d=null,n=null,r=function(){t.on("click","[data-toggle]",i)},i=function(e){e.preventDefault(),d.each(function(){a(this).hasClass("navbar__tabs-element")?a(this).removeClass("navbar__tabs-element--active"):a(this).closest(".navbar__tabs-element").removeClass("navbar__tabs-element--active")}),n.removeClass("tabs__content--active");var t=a(this).data("toggle");l.find('[data-target="'+t+'"]').addClass("tabs__content--active"),a(this).hasClass("navbar__tabs-element")?a(this).addClass("navbar__tabs-element--active"):a(this).closest(".navbar__tabs-element").addClass("navbar__tabs-element--active")};this.length>0&&(this.length>1?this.each(function(){a(this).dynamicTabs()}):(t=(e=this).find('[data-element="nav"]'),l=e.find('[data-element="content"]'),d=t.find("[data-toggle]"),n=l.find("[data-target]"),r()))}}(jQuery),function(a){a.fn.dynamicList=function(){var e=null,t=null,l=null,d=null,n=0,r=null,i=function(){t.find("[data-selected]").each(function(){var e=a(this).data("selected"),t=a(this).val(),l=a(this).text();e=e.toString().split(","),a.each(e,function(){var e=a("<div></div>").attr("class","drag-el").attr("data-id",t).data("order",this);e.append(a("<span></span>").html(l)),null!==r&&e.append(a("<input/>").attr("type","hidden").attr("name",r+"["+this+"]").val(t)),e.append(a("<a></a>").attr("class","delete").html("usuń")),e.append(a("<a></a>").attr("class","move-up").html("w górę")),e.append(a("<a></a>").attr("class","move-down").html("w dół")),d.append(e),n++})}),c()},s=function(e){e.preventDefault();var l=t.find("option:selected");if(l.length>0){var i=a("<div></div>").attr("class","drag-el").attr("data-id",l.val()).data("order",n);i.append(a("<span></span>").html(l.text())),null!==r&&i.append(a("<input/>").attr("type","hidden").attr("name",r+"["+n+"]").val(l.val())),i.append(a("<a></a>").attr("class","delete").html("usuń")),i.append(a("<a></a>").attr("class","move-up").html("w górę")),i.append(a("<a></a>").attr("class","move-down").html("w dół")),d.append(i),n++}else alert("Musisz wybrać element z listy!")},o=function(e){e.preventDefault();var t=a(this).closest(".drag-el"),l=t.data("order");if(l<n-1){d.find(".drag-el").each(function(){var e=a(this).data("order");if(e>l){e--,a(this).data("order",e);var t=a(this).find("input");t.length>0&&t.attr("name",r+"["+e+"]")}})}t.remove(),n--},p=function(e){e.preventDefault();var t=a(this).closest(".drag-el"),l=t.data("order"),i=d.find(".drag-el");"move-up"===a(this).attr("class")?l>0&&(l--,i.each(function(){var e=a(this).data("order");if(e===l){e++,a(this).data("order",e);var t=a(this).find("input");t.length>0&&t.attr("name",r+"["+e+"]")}})):"move-down"===a(this).attr("class")&&l<n-1&&(l++,i.each(function(){var e=a(this).data("order");if(e===l){e--,a(this).data("order",e);var t=a(this).find("input");t.length>0&&t.attr("name",r+"["+e+"]")}})),t.data("order",l);var s=t.find("input");s.length>0&&s.attr("name",r+"["+l+"]"),c()},c=function(){var e=d.find(".drag-el").toArray();e.sort(function(e,t){var l=a(e).data("order"),d=a(t).data("order");return l===d?0:l>d?1:-1}),d.html("");for(var t=0;t<e.length;t++){var l=a(e[t]);l.data("order",t),d.append(l)}};this.length>0&&(this.length>1?this.each(function(){a(this).dynamicList()}):(t=(e=this).find('[data-element="select"]'),l=e.find('[data-element="button"]'),d=e.find('[data-element="container"]'),void 0===(r=e.data("name"))&&(r=null),i(),l.on("click",s),d.on("click",".delete",o),d.on("click",".move-up",p),d.on("click",".move-down",p)))}}(jQuery),function(a){a.fn.dynamicSelect=function(){var e=null,t=null,l=null,d=null,n=function(){t.on("change",r)},r=function(){d.addClass("display-none");var e=t.find("option:selected").data("select");d.each(function(){var t=a(this).data("element-select");e===t&&a(this).removeClass("display-none")})};this.length>0&&(this.length>1?this.each(function(){a(this).dynamicSelect()}):(t=(e=this).find('[data-element="select"]'),l=e.find('[data-element="container"]'),(d=l.find("[data-element-select]")).addClass("display-none"),n(),r()))}}(jQuery),function(a){var e={fields:null,name:"some-name",values:[]};a.fn.dynamicBox=function(t){var l,d=null,n=null,r=null,i=null,s=0,o=function(){r.on("click",c),n.on("click",".box__delete",v)},p=function(){a.each(l.values,function(){var e=i.find(".js-row:last-of-type"),t=a("<div></div>").addClass("grid__col grid__col--50");0===e.length&&(e=a("<div></div>").addClass("grid__row js-row"),i.append(e)),s%2==0&&s>0&&(e=a("<div></div>").addClass("grid__row js-row"),i.append(e));var l=h(s,this);t.append(l),e.append(t),s++})},c=function(e){e.preventDefault();var t=i.find(".js-row:last-of-type"),l=a("<div></div>").addClass("grid__col grid__col--50");0===t.length&&(t=a("<div></div>").addClass("grid__row js-row"),i.append(t)),s%2==0&&s>0&&(t=a("<div></div>").addClass("grid__row js-row"),i.append(t));var d=h(s);l.append(d),t.append(l),s++},h=function(e,t){var n=a("<div></div>").addClass("box").attr("data-order",e),r=a("<button></button>").addClass("box__delete").append('<span class="dashicons dashicons-no-alt"></span>');return n.append(r),i.addClass("box-section"),null!==l.fields&&a.each(l.fields,function(l,r){var i="render"+f(r.type)+"Element",s=null;void 0!==t&&a.each(t,function(){this.hasOwnProperty("name")&&this.name===r.name&&this.hasOwnProperty("value")&&("checkbox"!==r.type&&"radio"!==r.type?s=this.value:"radio"===r.type?r.hasOwnProperty("value")?r.value===this.value&&(s=!0):s=!0:"checkbox"===r.type&&(r.hasOwnProperty("value")?"array"===a.type(this.value)?a.inArray(r.value,this.value)&&(s=!0):r.value===this.value&&(s=!0):s=!0))});var o=d[i](r.name,e,r,s);n.append(o)}),n},v=function(e){e.preventDefault();var t=a(this).closest(".box"),d=t.attr("data-order");if(d<s-1){n.find(".box").each(function(){var e=a(this).attr("data-order");if(e>d){e--,a(this).attr("data-order",e);var t=a(this).find("[name]");t.length>0&&t.each(function(){var t=a(this).attr("name"),d=(t=t.replace(l.name,"")).match(/\[([^\]]+)\]/g);d[0]="["+e+"]",t=l.name+d.join(""),a(this).attr("name",t)})}})}t.parent().remove(),0===--s&&i.removeClass("box-section");var r=n.find(".box");u(r)},u=function(e){var t=[];a.each(e,function(){var e=[],d=a(this).attr("data-order"),n=a(this);a.each(l.fields,function(t,r){var i=r.name,s=i.match(/\[([^\]]+)\]/g);a.each(s,function(){i=i.replace(this,"")});var o="";null!==s&&void 0!==s&&s.length>0&&(o=s.join(""));var p=l.name+"["+d+"]["+i+"]"+o,c=n.find('[name="'+p+'"]');e.push({name:r.name,value:c.val()})}),t[d]=e}),console.log(t),i.html(""),a.each(t,function(e,t){var l=i.find(".js-row:last-of-type"),d=a("<div></div>").addClass("grid__col grid__col--50");0===l.length&&(l=a("<div></div>").addClass("grid__row js-row"),i.append(l)),e%2==0&&e>0&&(l=a("<div></div>").addClass("grid__row js-row"),i.append(l));var n=h(e,t);d.append(n),l.append(d)})},f=function(a){return void 0!==a&&a.length>1?a[0].toUpperCase()+a.slice(1):""};this.renderTextElement=function(e,t,d,n){var r=a("<div></div>").addClass("grid__row"),i=a("<div></div>");if(d.hasOwnProperty("label")){var s=a("<div></div>").addClass("grid__col grid__col--30"),o=a("<label></label>").html(d.label).addClass("label");d.hasOwnProperty("labelClass")&&o.addClass(d.labelClass),d.hasOwnProperty("id")&&o.attr("for",d.id),s.append(o),r.append(s),i.addClass("grid__col grid__col--70")}else i.addClass("grid__col grid__col--100");var p=a("<input/>").addClass("input");d.hasOwnProperty("class")&&p.addClass(d.class),d.hasOwnProperty("id")&&p.attr("id",d.id),d.hasOwnProperty("placeholder")&&p.attr("placeholder",d.placeholder);var c=e.match(/\[([^\]]+)\]/g);a.each(c,function(){e=e.replace(this,"")});var h="";null!==c&&void 0!==c&&c.length>0&&(h=c.join(""));var v=l.name+"["+t+"]["+e+"]"+h;return p.attr("name",v),null!==n&&p.val(n),i.append(p),r.append(i),r},this.renderTextareaElement=function(e,t,d,n){var r=a("<div></div>").addClass("grid__row"),i=a("<div></div>");if(d.hasOwnProperty("label")){var s=a("<div></div>").addClass("grid__col grid__col--30"),o=a("<label></label>").html(d.label).addClass("label");d.hasOwnProperty("labelClass")&&o.addClass(d.labelClass),d.hasOwnProperty("id")&&o.attr("for",d.id),s.append(o),r.append(s),i.addClass("grid__col grid__col--70")}else i.addClass("grid__col grid__col--100");var p=a("<textarea></textarea>").addClass("textarea");d.hasOwnProperty("class")&&p.addClass(d.class),d.hasOwnProperty("rows")&&p.attr("rows",d.rows),d.hasOwnProperty("id")&&p.attr("id",d.id),d.hasOwnProperty("placeholder")&&p.attr("placeholder",d.placeholder);var c=e.match(/\[([^\]]+)\]/g);a.each(c,function(){e=e.replace(this,"")});var h="";null!==c&&void 0!==c&&c.length>0&&(h=c.join(""));var v=l.name+"["+t+"]["+e+"]"+h;return p.attr("name",v),null!==n&&p.val(n),i.append(p),r.append(i),r},this.renderRadioElement=function(e,t,d,n){var r=a("<div></div>").addClass("grid__row"),i=a("<div></div>"),s=a("<label></label>").addClass("label label--radio");if(d.hasOwnProperty("label")){var o=a("<div></div>").addClass("grid__col grid__col--100");d.hasOwnProperty("labelClass")&&s.addClass(d.labelClass);var p=a("<input/>").attr("type","radio");d.hasOwnProperty("class")&&p.addClass(d.class),d.hasOwnProperty("value")&&p.attr("value",d.value),d.hasOwnProperty("id")&&p.attr("id",d.id),o.append(s),s.append(p),s.append(d.label)}var c=e.match(/\[([^\]]+)\]/g);a.each(c,function(){e=e.replace(this,"")});var h="";null!==c&&void 0!==c&&c.length>0&&(h=c.join(""));var v=l.name+"["+t+"]["+e+"]"+h;return p.attr("name",v),null!==n&&!0===n&&p.attr("checked",""),i.append(o),r.append(i),r},this.renderCheckboxElement=function(e,t,d,n){var r=a("<div></div>").addClass("grid__row"),i=a("<div></div>"),s=a("<label></label>").addClass("label label--checkbox");if(d.hasOwnProperty("label")){var o=a("<div></div>").addClass("grid__col grid__col--100");d.hasOwnProperty("labelClass")&&s.addClass(d.labelClass);var p=a("<input/>").attr("type","checkbox");d.hasOwnProperty("class")&&p.addClass(d.class),d.hasOwnProperty("value")&&p.attr("value",d.value),d.hasOwnProperty("id")&&p.attr("id",d.id),o.append(s),s.append(p),s.append(d.label)}var c=e.match(/\[([^\]]+)\]/g);a.each(c,function(){e=e.replace(this,"")});var h="";null!==c&&void 0!==c&&c.length>0&&(h=c.join(""));var v=l.name+"["+t+"]["+e+"]"+h;return d.hasOwnProperty("group")&&d.group&&(v+="[]"),p.attr("name",v),null!==n&&!0===n&&p.attr("checked",""),i.append(o),r.append(i),r},this.renderSelectElement=function(e,t,d,n){var r=a("<div></div>").addClass("grid__row"),i=a("<div></div>");if(d.hasOwnProperty("label")){var s=a("<div></div>").addClass("grid__col grid__col--30"),o=a("<label></label>").html(d.label).addClass("label");d.hasOwnProperty("labelClass")&&o.addClass(d.labelClass),d.hasOwnProperty("id")&&o.attr("for",d.id),s.append(o),r.append(s),i.addClass("grid__col grid__col--70")}else i.addClass("grid__col grid__col--100");var p=a("<select></select>").addClass("select");if(d.hasOwnProperty("class")&&p.addClass(d.class),d.hasOwnProperty("id")&&p.attr("id",d.id),d.hasOwnProperty("size")&&p.attr("size",d.size),d.hasOwnProperty("options")){var c=d.options;a.each(c,function(e,t){var l=a("<option></option>");"array"===a.type(d.options)?(l.html(t),null!==n&&("array"===a.type(n)?a.inArray(t,n)&&l.attr("selected",""):t===n&&l.attr("selected",""))):(l.html(t).attr("value",e),null!==n&&("array"===a.type(n)?a.inArray(e,n)&&l.attr("selected",""):e===n&&l.attr("selected",""))),p.append(l)})}var h=e.match(/\[([^\]]+)\]/g);a.each(h,function(){e=e.replace(this,"")});var v="";null!==h&&void 0!==h&&h.length>0&&(v=h.join(""));var u=l.name+"["+t+"]["+e+"]"+v;return d.hasOwnProperty("multiple")&&!0===d.multiple&&(p.attr("multiple",""),u+="[]"),p.attr("name",u),i.append(p),r.append(i),r},this.renderFileuploadElement=function(e,t,d,n){var r=a("<div></div>").addClass("grid__row"),i=a("<div></div>");if(d.hasOwnProperty("label")){var s=a("<div></div>").addClass("grid__col grid__col--30"),o=a("<label></label>").html(d.label).addClass("label");d.hasOwnProperty("labelClass")&&o.addClass(d.labelClass),d.hasOwnProperty("id")&&o.attr("for",d.id),s.append(o),r.append(s),i.addClass("grid__col grid__col--70")}else i.addClass("grid__col grid__col--100");var p=a("<div></div>").addClass("jsupload wp-upload");d.hasOwnProperty("id")&&p.attr("data-id",d.id),d.hasOwnProperty("class")&&p.addClass(d.class);var c=e.match(/\[([^\]]+)\]/g);a.each(c,function(){e=e.replace(this,"")});var h="";null!==c&&void 0!==c&&c.length>0&&(h=c.join(""));var v=l.name+"["+t+"]["+e+"]"+h;return p.attr("data-name",v),null!==n&&p.attr("data-value",n),i.append(p),r.append(i),p.wpUpload(),r},this.renderDatepickerElement=function(e,t,d,n){var r=a("<div></div>").addClass("grid__row"),i=a("<div></div>");if(d.hasOwnProperty("label")){var s=a("<div></div>").addClass("grid__col grid__col--30"),o=a("<label></label>").html(d.label).addClass("label");d.hasOwnProperty("labelClass")&&o.addClass(d.labelClass),d.hasOwnProperty("id")&&o.attr("for",d.id),s.append(o),r.append(s),i.addClass("grid__col grid__col--70")}else i.addClass("grid__col grid__col--100");var p=a("<input/>").addClass("input");d.hasOwnProperty("class")&&p.addClass(d.class),d.hasOwnProperty("id")&&p.attr("id",d.id);var c=e.match(/\[([^\]]+)\]/g);a.each(c,function(){e=e.replace(this,"")});var h="";null!==c&&void 0!==c&&c.length>0&&(h=c.join(""));var v=l.name+"["+t+"]["+e+"]"+h;return p.attr("name",v),null!==n&&p.val(n),i.append(p),r.append(i),d.hasOwnProperty("datepicker")?p.datepicker(d.datepicker):p.datepicker(),r},this.renderColorpickerElement=function(e,t,d,n){var r=a("<div></div>").addClass("grid__row"),i=a("<div></div>");if(d.hasOwnProperty("label")){var s=a("<div></div>").addClass("grid__col grid__col--30"),o=a("<label></label>").html(d.label).addClass("label");d.hasOwnProperty("labelClass")&&o.addClass(d.labelClass),d.hasOwnProperty("id")&&o.attr("for",d.id),s.append(o),r.append(s),i.addClass("grid__col grid__col--70")}else i.addClass("grid__col grid__col--100");var p=a("<input/>").addClass("input");d.hasOwnProperty("class")&&p.addClass(d.class),d.hasOwnProperty("id")&&p.attr("id",d.id);var c=e.match(/\[([^\]]+)\]/g);a.each(c,function(){e=e.replace(this,"")});var h="";null!==c&&void 0!==c&&c.length>0&&(h=c.join(""));var v=l.name+"["+t+"]["+e+"]"+h;return p.attr("name",v),null!==n&&p.val(n),i.append(p),r.append(i),d.hasOwnProperty("colorpicker")?p.wpColorPicker(d.colorpicker):p.wpColorPicker(),r},this.renderWpeditorElement=function(e,t,d,n){var r=a("<div></div>").addClass("grid__row"),i=a("<div></div>");if(d.hasOwnProperty("label")){var s=a("<div></div>").addClass("grid__col grid__col--100"),o=a("<label></label>").html(d.label).addClass("label");d.hasOwnProperty("labelClass")&&o.addClass(d.labelClass),d.hasOwnProperty("id")&&o.attr("for",d.id),s.append(o),r.append(s),i.addClass("grid__col grid__col--100")}else i.addClass("grid__col grid__col--100");var p=a("<textarea></textarea>").addClass("textarea");d.hasOwnProperty("class")&&p.addClass(d.class),d.hasOwnProperty("rows")&&p.attr("rows",d.rows),d.hasOwnProperty("id")?p.attr("id",d.id):p.attr("id",function(){for(var a="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=0;t<10;t++)a+=e.charAt(Math.floor(Math.random()*e.length));return a}()),d.hasOwnProperty("placeholder")&&p.attr("placeholder",d.placeholder);var c=e.match(/\[([^\]]+)\]/g);a.each(c,function(){e=e.replace(this,"")});var h="";null!==c&&void 0!==c&&c.length>0&&(h=c.join(""));var v=l.name+"["+t+"]["+e+"]"+h;return p.attr("name",v),null!==n&&p.val(n),i.append(p),r.append(i),wp.editor.initialize(p.attr("id"),{tinymce:!0,quicktags:!0}),r},this.length>0&&(this.length>1?this.each(function(){a(this).dynamicBox(t)}):(!function(t){if("object"==typeof(l=a.extend({},e,t)).fields)if("array"===a.type(l.fields)){var d={};a.each(l.fields,function(){this.hasOwnProperty("name")&&(d[this.name]=this)}),l.fields=d}else l.fields.hasOwnProperty("name")?(d=l.fields,l.fields={},l.fields[d.name]=d):a.each(l.fields,function(a,e){e.hasOwnProperty("name")||(e.name=a)})}(t),n=(d=this).find('[data-element="container"]'),r=d.find('[data-element="button"]'),i=a("<div></div>"),n.append(i),o(),p()))}}(jQuery),jQuery(document).ready(function(a){a(".jsupload").wpUpload(),a("[data-confirm]").on("click",function(e){confirm(a(this).data("confirm"))||e.preventDefault()}),a(".js-dynamic-tabs").dynamicTabs(),a(".js-dynamic-list").dynamicList(),a(".js-dynamic-select").dynamicSelect(),a(".js-colorpicker").wpColorPicker()});